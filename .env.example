# Core environment
ENV=development
LOG_LEVEL=info

# Database
DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/proteus

# Redis
REDIS_URL=redis://localhost:6379/0

# Worker queues
ENGINE_QUEUE=engine:fast
ROUTER_MAX_DEPTH=2

# Browser engine
BROWSER_TIMEOUT_MS=30000
BROWSER_WAIT_UNTIL=networkidle
BROWSER_WAIT_FOR_SELECTOR=
BROWSER_WAIT_FOR_MS=0
BROWSER_SCROLL_STEPS=0
BROWSER_SCROLL_DELAY_MS=0
BROWSER_SCROLL_CONTAINER_SELECTOR=
BROWSER_COLLECT_MAX_ITEMS=0
BROWSER_PAGINATION_MAX_PAGES=1
BROWSER_PAGINATION_NEXT_SELECTOR=
BROWSER_PAGINATION_PARAM=
BROWSER_PAGINATION_START=1
BROWSER_PAGINATION_STEP=1
BROWSER_PAGINATION_TEMPLATE=
BROWSER_HEADLESS=true
BROWSER_FULL_PAGE=true

# Fast fetcher
FETCH_TIMEOUT_MS=20000
FETCH_MAX_BYTES=0
FETCH_USER_AGENT=ProteusFetcher/1.0
FETCH_CURL_IMPERSONATE=
FETCH_RETRIES=2
FETCH_BACKOFF_MS=250
FETCH_BACKOFF_MAX_MS=2000
FETCH_POOL_MAX_CONNECTIONS=100
FETCH_POOL_MAX_KEEPALIVE=20

# Metrics
METRICS_ENABLED=true
METRICS_HOST=0.0.0.0
METRICS_PORT_DISPATCHER=8002
METRICS_PORT_WORKER=8003
PREVIEW_HTML_MAX_CHARS=500000

# Proxy gateway
PROXY_DEFAULT_MODE=gateway
PROXY_GATEWAY_URL=http://localhost:8081

# Stealth fetcher gating
STEALTH_ENABLED=true
STEALTH_ALLOWED_DOMAINS=

# External API tier (tier 4)
EXTERNAL_ENABLED=false
EXTERNAL_PROVIDER=scrapfly
EXTERNAL_PROVIDER_URL=
EXTERNAL_API_KEY=
EXTERNAL_ALLOWLIST_DOMAINS=
EXTERNAL_TIMEOUT_MS=30000
EXTERNAL_MAX_CALLS_PER_TENANT=100
EXTERNAL_MAX_COST_PER_TENANT=0
EXTERNAL_WINDOW_SEC=86400
EXTERNAL_COST_PER_CALL=0
EXTERNAL_BREAKER_THRESHOLD=3
EXTERNAL_BREAKER_WINDOW_SEC=60
EXTERNAL_BREAKER_COOLDOWN_SEC=300

# Object storage (optional)
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_BUCKET=proteus-artifacts
S3_REGION=us-east-1

# LLM provider (optional)
OPENAI_API_KEY=
IDENTITY_ENCRYPTION_KEY=

# LLM recovery
LLM_MODEL=gpt-4o-mini
LLM_MAX_TOKENS=800
LLM_TEMPERATURE=0.2
LLM_TIMEOUT_MS=30000
LLM_MAX_HTML_CHARS=12000
IDENTITY_FAILURE_THRESHOLD=3
IDENTITY_FAILURE_DECAY_PER_HOUR=0.25
IDENTITY_BINDING_TTL_SEC=3600
LLM_JOB_MAX_CALLS=1
LLM_JOB_WINDOW_SEC=3600
LLM_TENANT_MAX_CALLS=1000
LLM_TENANT_WINDOW_SEC=86400
SELECTOR_PROMOTION_THRESHOLD=3

# Security and access control
AUTH_ENABLED=false
AUTH_API_TOKENS=
AUTH_JWT_SECRET=
AUTH_JWT_ISSUER=
AUTH_JWT_AUDIENCE=
AUTH_JWT_LEEWAY_SEC=30
AUTH_PROTECT_METRICS=false
SSRF_ALLOWLIST_DOMAINS=
SSRF_DENYLIST_DOMAINS=
SSRF_ALLOW_PRIVATE_IPS=false
UI_RATE_LIMIT_PREVIEW_PER_MIN=30
UI_RATE_LIMIT_SCHEMA_PER_MIN=60
UI_RATE_LIMIT_WINDOW_SEC=60

# Governance
RATE_LIMIT_CAPACITY=0
RATE_LIMIT_REFILL_PER_SEC=0
RATE_LIMIT_MAX_WAIT_MS=0
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_WINDOW_SEC=60
CIRCUIT_BREAKER_COOLDOWN_SEC=300
